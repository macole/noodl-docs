# プログレッシブウェブアプリ

プログレッシブウェブアプリ（PWA）は、ウェブとネイティブモバイルアプリケーションの両方の優れた特徴を組み合わせたタイプのウェブアプリケーションです。PWAは、アプリストアからアプリをインストールする必要なく、異なるデバイスやプラットフォームで迅速かつ信頼性があり、魅力的なユーザー体験を提供します。PWAは最新のウェブ技術を使用して、オフラインアクセス、プッシュ通知、デバイスハードウェアへのアクセスなど、アプリのような機能を提供します。

現在の時点（Noodl 2.8.3）で、NoodlにはPWAでの作業を**容易**にするための組み込み機能はありません。
詳細をお聞きになりたい場合は、[お問い合わせください](https://www.noodl.net/community)。

## 主な特徴

PWAの主な特徴は以下の通りです。

### 接続の独立性

PWAの主な特徴の一つは、オフラインまたはネットワーク状況が悪い場合でも動作する能力です。これはサービスワーカーを使用して実装されたキャッシュ戦略を通じて実現され、ユーザーのデバイスにアセットやデータをローカルに保存します。

サービスワーカーは、この目的を達成する方法の一つです。これは、メインのブラウザスレッドとは別にバックグラウンドで動作するJavaScriptファイルです。オフライン機能、キャッシング、バックグラウンド同期、プッシュ通知など、PWAの主要機能を可能にします。サービスワーカーはウェブアプリとネットワーク間のプロキシとして機能し、ネットワークリクエストの処理方法を制御し、効率的なキャッシング戦略を実装することができます。

### 高速で信頼性のあるパフォーマンス

PWAは、キャッシュされたデータやアセットを使用して、オフラインまたはネットワーク状態が悪い場合でも機能するユーザー体験を提供します。PWAはキャッシングとバックグラウンドデータ同期を使用して、スムーズで高速なユーザー体験を保証します。

ウェブワーカーは、ウェブアプリケーションのパフォーマンスを向上させる強力なツールです。これらは、メインブラウザスレッドとは別にバックグラウンドでJavaScriptコードを実行し、計算集約的なタスクをオフロードしてユーザーインターフェイスの応答性に影響を与えることなく実行できます。ウェブワーカーはメッセージシステムを使用してメインスレッドと通信し、アプリケーションの残りの部分とシームレスに統合されます。ウェブワーカーによって複雑な操作を並行して実行することが可能になり、特にCPUを要求するアプリケーションにおいて全体的なユーザー体験が大幅に向上します。

Noodlにはウェブワーカーで動作するモジュールがあり、それはかなり技術的であり、[ウェブワーカーモジュール](https://github.com/noodlapp/modules/tree/main/modules/web-worker)で見つけることができます。

### インストール可能

PWAでは、ネイティブアプリのように、Noodlアプリをデバイスのホーム画面に追加することができます。PWAをインストールすると、ショートカットが作成され、ブラウザを開いてアプリのURLにアクセスする必要なく、ウェブアプリに直接アクセスすることができます。

PWAのインストールプロセスは比較的シンプルで、アプリストアからのダウンロードは必要ありません。PWAが特定の基準（例えば、ウェブアプリマニフェストの存在やHTTPS経由での提供など）を満たすと、ブラウザはユーザーにPWAのインストールを促すか、手動で行うオプションを提供することがあります。

インストールされると、PWAはホーム画面、アプリドロワー、またはネイティブアプリにアクセスできる他の場所から起動することができます。PWAはスタンドアロンウィンドウで開き、通常のブラウザインターフェイス要素なしで、よりネイティブアプリのような感覚を提供します。

## PWAを作成する方法は？

### ウェブアプリマニフェストの作成

ウェブアプリマニフェストは、PWAに関するメタデータを提供するJSONファイルです。例えば、その名前、アイコン、表示設定、好ましい方向性などです。この情報により、PWAはカスタムアイコンと起動体験を備えてデバイスのホーム画面にインストールされ、よりネイティブアプリのように感じられるようになります。

1. manifest.jsonファイルを作成し、Noodlアプリの[プロジェクトディレクトリ](/docs/guides/deploy/project-structure/)に含めます。

2. manifest.jsonファイルを開き、ウェブアプリに必要な基本的なプロパティを追加します。

以下に簡単な例を示します：

```json
{
  "name": "My PWA",
  "short_name": "PWA",
  "description": "A sample Progressive Web App",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#000000"
}
```

各プロパティの簡単な説明です：

- `name`: PWAのフルネーム。
- `short_name`: PWAの短い名前。スペースが限られている場合に使用されます（例：ホーム画面上）。
- `description`: PWAの簡単な説明。
- `start_url`: PWAが起動されるときに開かれるURL。
- `display`: PWAの好ましい表示モード。"standalone"はブラウザのインターフェイス要素がない最もアプリのような体験です。
- `background_color`: 背景色。

3. プロジェクト設定にあるヘッドコードでリンクタグを使用して参照してください：

```html
<link rel="manifest" href="/manifest.json" />
```

4. アプリケーションをデプロイすると、PWAの基本機能を使用することができます。

### 電話でウェブアプリマニフェストを確認する

マニフェストファイルをインストールした後、これをテストする方法はいくつかあります。
これは、電話で以下の手順に従ってテストする方法の一つです：

1. 電話のブラウザを使用してNoodlアプリのURLにアクセスし、ウェブアプリを開きます。

2. ウェブアプリを電話のホーム画面に追加します：

   - **Android（Chrome）**：ブラウザの右上隅にある縦の省略記号（⋮）をタップし、メニューから「ホーム画面に追加」または「アプリをインストール」を選択します。プロンプトが表示されたら「追加」または「インストール」をタップして確認します。

   - **iOS（Safari）**：ブラウザの下部にある「共有」アイコン（矢印が上を指している正方形）をタップし、下にスクロールして「ホーム画面に追加」を選択します。右上隅にある「追加」をタップして確認します。

3. ブラウザを閉じて、電話のホーム画面でアプリアイコンを探します。

4. アプリアイコンをタップしてPWAを起動します。これは、ブラウザのインターフェイス要素なしでスタンドアロンウィンドウで開くため、アプリのような体験を提供するはずです。

この方法では、ウェブアプリがホーム画面に追加され、PWAのように起動できるかどうかを確認するだけです。オフラインサポート、プッシュ通知、パフォーマンスの最適化など、完全なPWA機能や特徴は評価しません。
PWAを徹底的にテストするには、Chrome Developer ToolsのLighthouseを使用することを検討してください。